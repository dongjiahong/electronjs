<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      ul{
        padding: 0;
      }
      li{
        list-style: none;
      }
      .docker{
        padding: 10px;
      }
      .box{
        width:100%;
        height: auto;
      }
      .text{
        width:80%;
        outline: none;
      }
      .changetrue{
        text-decoration: line-through;
      }
    </style>
  </head>
  <body>
    <div class="docker">
      <h3>Note</h3>
      <button type="button" name="button" class="add">add</button>
      <ul class="box">

      </ul>
    </div>
  </body>
  <script type="text/javascript">
    var note = function () {
      var that = this
      var button = document.querySelector('.add')
      var box = document.querySelector('.box')
      this.clickadd = function (button) {
        button.onclick = function () {
          that.addli()
          that.checkboxchange()
        }
      }
      this.addli = function () {
        var li = document.createElement("li")
        //
        var text = document.createElement("input")
        text.setAttribute('type', 'text')
        text.setAttribute('class', 'text')
        li.appendChild(text)
        //
        var checkbox = document.createElement("input")
        checkbox.setAttribute('type', 'checkbox')
        checkbox.setAttribute('class', 'checkbox')
        li.appendChild(checkbox)
        //

        box.appendChild(li)
      }
      this.checkboxchange = function () {
        var text = document.querySelectorAll('.text')
        var checkbox = document.querySelectorAll('.checkbox')
        for (let i = 0; i < checkbox.length; i++) {
          checkbox[i].addEventListener('change', function (e) {
            that.judecheckbox(i, e)
          })
        }
      }
      this.judecheckbox = function (i, e) {
        var text = document.querySelectorAll('.text')
        var checkbox = document.querySelectorAll('.checkbox')
        if (e.target.checked) {
          text[i].setAttribute('class', 'text changetrue')
        } else {
          text[i].setAttribute('class', 'text')
        }
      }
      this.init =function () {
        this.clickadd(button)
      }
      return this.init()
    }
    note()
  </script>
</html>
